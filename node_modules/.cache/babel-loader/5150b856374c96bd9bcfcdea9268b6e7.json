{"ast":null,"code":"var createRedSmokeRenderSystem=function createRedSmokeRenderSystem(){var SMOKE_WIDTH,SMOKE_HEIGHT;return{init:function init(_ref,_ref2){var foodTex=_ref.foodTex;var width=_ref2.width,height=_ref2.height;SMOKE_WIDTH=width/2;SMOKE_HEIGHT=SMOKE_WIDTH*3/5;},update:function update(delta,worldState,_ref3){var batch=_ref3.batch,camera=_ref3.camera,width=_ref3.width,height=_ref3.height;var redSmokeList=worldState.redSmokeList,smokeAnimation=worldState.smokeAnimation,emptyLife=worldState.emptyLife;batch.setProjection(camera.combined);batch.begin();batch.setColor(1,0,0,1);for(var i=redSmokeList.length-1;i>=0;i--){redSmokeList[i].stateTime+=delta;smokeAnimation.animation.getKeyFrame(redSmokeList[i].stateTime,1).draw(batch,redSmokeList[i].x-SMOKE_WIDTH/2.5,redSmokeList[i].y-SMOKE_HEIGHT/3,SMOKE_WIDTH,SMOKE_HEIGHT,SMOKE_WIDTH/2,SMOKE_HEIGHT/2,0,redSmokeList[i].scale,redSmokeList[i].scale);if(redSmokeList[i].stateTime>smokeAnimation.duration*smokeAnimation.frameLength){if(emptyLife&&i===redSmokeList.length-1){worldState.gameOver=true;}redSmokeList.splice(i,1);}}batch.end();}};};export default createRedSmokeRenderSystem;","map":{"version":3,"sources":["E:/fcatcher-client/src/components/game/systems/RedSmokeRenderSystem.js"],"names":["createRedSmokeRenderSystem","SMOKE_WIDTH","SMOKE_HEIGHT","init","foodTex","width","height","update","delta","worldState","batch","camera","redSmokeList","smokeAnimation","emptyLife","setProjection","combined","begin","setColor","i","length","stateTime","animation","getKeyFrame","draw","x","y","scale","duration","frameLength","gameOver","splice","end"],"mappings":"AAAA,GAAMA,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,EAAM,CACvC,GAAIC,CAAAA,WAAJ,CAAiBC,YAAjB,CACA,MAAO,CACLC,IADK,0BACgC,IAA9BC,CAAAA,OAA8B,MAA9BA,OAA8B,IAAjBC,CAAAA,KAAiB,OAAjBA,KAAiB,CAAVC,MAAU,OAAVA,MAAU,CACnCL,WAAW,CAAGI,KAAK,CAAG,CAAtB,CACAH,YAAY,CAAID,WAAW,CAAG,CAAf,CAAoB,CAAnC,CACD,CAJI,CAMLM,MANK,iBAMEC,KANF,CAMSC,UANT,OAMuD,IAAhCC,CAAAA,KAAgC,OAAhCA,KAAgC,CAAzBC,MAAyB,OAAzBA,MAAyB,CAAjBN,KAAiB,OAAjBA,KAAiB,CAAVC,MAAU,OAAVA,MAAU,IAClDM,CAAAA,YADkD,CACNH,UADM,CAClDG,YADkD,CACpCC,cADoC,CACNJ,UADM,CACpCI,cADoC,CACpBC,SADoB,CACNL,UADM,CACpBK,SADoB,CAE1DJ,KAAK,CAACK,aAAN,CAAoBJ,MAAM,CAACK,QAA3B,EACAN,KAAK,CAACO,KAAN,GACAP,KAAK,CAACQ,QAAN,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,EACA,IAAK,GAAIC,CAAAA,CAAC,CAAGP,YAAY,CAACQ,MAAb,CAAsB,CAAnC,CAAsCD,CAAC,EAAI,CAA3C,CAA8CA,CAAC,EAA/C,CAAmD,CACjDP,YAAY,CAACO,CAAD,CAAZ,CAAgBE,SAAhB,EAA6Bb,KAA7B,CACAK,cAAc,CAACS,SAAf,CACGC,WADH,CACeX,YAAY,CAACO,CAAD,CAAZ,CAAgBE,SAD/B,CAC0C,CAD1C,EAEGG,IAFH,CAGId,KAHJ,CAIIE,YAAY,CAACO,CAAD,CAAZ,CAAgBM,CAAhB,CAAoBxB,WAAW,CAAG,GAJtC,CAKIW,YAAY,CAACO,CAAD,CAAZ,CAAgBO,CAAhB,CAAoBxB,YAAY,CAAG,CALvC,CAMID,WANJ,CAOIC,YAPJ,CAQID,WAAW,CAAG,CARlB,CASIC,YAAY,CAAG,CATnB,CAUI,CAVJ,CAWIU,YAAY,CAACO,CAAD,CAAZ,CAAgBQ,KAXpB,CAYIf,YAAY,CAACO,CAAD,CAAZ,CAAgBQ,KAZpB,EAcA,GACEf,YAAY,CAACO,CAAD,CAAZ,CAAgBE,SAAhB,CACAR,cAAc,CAACe,QAAf,CAA0Bf,cAAc,CAACgB,WAF3C,CAGE,CACA,GAAIf,SAAS,EAAIK,CAAC,GAAKP,YAAY,CAACQ,MAAb,CAAsB,CAA7C,CAAgD,CAC9CX,UAAU,CAACqB,QAAX,CAAsB,IAAtB,CACD,CACDlB,YAAY,CAACmB,MAAb,CAAoBZ,CAApB,CAAuB,CAAvB,EACD,CACF,CACDT,KAAK,CAACsB,GAAN,GACD,CAtCI,CAAP,CAwCD,CA1CD,CA4CA,cAAehC,CAAAA,0BAAf","sourcesContent":["const createRedSmokeRenderSystem = () => {\r\n  let SMOKE_WIDTH, SMOKE_HEIGHT;\r\n  return {\r\n    init({ foodTex }, { width, height }) {\r\n      SMOKE_WIDTH = width / 2;\r\n      SMOKE_HEIGHT = (SMOKE_WIDTH * 3) / 5;\r\n    },\r\n\r\n    update(delta, worldState, { batch, camera, width, height }) {\r\n      const { redSmokeList, smokeAnimation, emptyLife } = worldState;\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      batch.setColor(1, 0, 0, 1);\r\n      for (let i = redSmokeList.length - 1; i >= 0; i--) {\r\n        redSmokeList[i].stateTime += delta;\r\n        smokeAnimation.animation\r\n          .getKeyFrame(redSmokeList[i].stateTime, 1)\r\n          .draw(\r\n            batch,\r\n            redSmokeList[i].x - SMOKE_WIDTH / 2.5,\r\n            redSmokeList[i].y - SMOKE_HEIGHT / 3,\r\n            SMOKE_WIDTH,\r\n            SMOKE_HEIGHT,\r\n            SMOKE_WIDTH / 2,\r\n            SMOKE_HEIGHT / 2,\r\n            0,\r\n            redSmokeList[i].scale,\r\n            redSmokeList[i].scale\r\n          );\r\n        if (\r\n          redSmokeList[i].stateTime >\r\n          smokeAnimation.duration * smokeAnimation.frameLength\r\n        ) {\r\n          if (emptyLife && i === redSmokeList.length - 1) {\r\n            worldState.gameOver = true;\r\n          }\r\n          redSmokeList.splice(i, 1);\r\n        }\r\n      }\r\n      batch.end();\r\n    },\r\n  };\r\n};\r\n\r\nexport default createRedSmokeRenderSystem;\r\n"]},"metadata":{},"sourceType":"module"}