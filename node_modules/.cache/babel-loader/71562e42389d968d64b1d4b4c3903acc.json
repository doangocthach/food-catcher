{"ast":null,"code":"import _createForOfIteratorHelper from\"E:\\\\fcatcher-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import{AlignMode,TextType}from\"../utils/loadFontFile\";var createRecipeRenderSystem=function createRecipeRenderSystem(){var FOOD_WIDTH,FOOD_HEIGHT;var recipePositionInfos=[];var TEXT_AMOUNT1,TEXT_AMOUNT2,TEXT_AMOUNT3,TEXT_AMOUNT4;var TEXT_COUNTER,TEXT_LIST;var numberFont;return{init:function init(_ref,_ref2){var foodTex=_ref.foodTex;var width=_ref2.width,height=_ref2.height,font=_ref2.font;var tmpFood;var _iterator=_createForOfIteratorHelper(foodTex),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var tex=_step.value;if(tex.index===0){tmpFood=tex.image;break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}FOOD_WIDTH=width/7;FOOD_HEIGHT=FOOD_WIDTH*tmpFood.height/tmpFood.width;var RECIPE_MARGIN=width/75;for(var i=0;i<4;i++){recipePositionInfos.push({x:width/3.06+i*(FOOD_WIDTH+RECIPE_MARGIN),y:height*0.028});}numberFont=font.numberFont;TEXT_COUNTER=numberFont.setNewText(width);TEXT_COUNTER.setAlignMode(AlignMode.right);TEXT_COUNTER.setType(TextType.dynamic);},update:function update(delta,_ref3,_ref4){var recipes=_ref3.recipes,foodTex=_ref3.foodTex,whiteSmokeList=_ref3.whiteSmokeList,smokeAnimation=_ref3.smokeAnimation,stateTime=_ref3.stateTime,genderNewRecipeAmount=_ref3.genderNewRecipeAmount;var batch=_ref4.batch,camera=_ref4.camera,width=_ref4.width,height=_ref4.height,font=_ref4.font;if(genderNewRecipeAmount){genderNewRecipeAmount=false;TEXT_AMOUNT1=numberFont.setNewText(width);TEXT_AMOUNT1.setAlignMode(AlignMode.left);TEXT_AMOUNT2=numberFont.setNewText(width);TEXT_AMOUNT2.setAlignMode(AlignMode.left);TEXT_AMOUNT3=numberFont.setNewText(width);TEXT_AMOUNT3.setAlignMode(AlignMode.left);TEXT_AMOUNT4=numberFont.setNewText(width);TEXT_AMOUNT4.setAlignMode(AlignMode.left);TEXT_LIST=[TEXT_AMOUNT1,TEXT_AMOUNT2,TEXT_AMOUNT3,TEXT_AMOUNT4];}batch.setProjection(camera.combined);batch.begin();for(var i=0;i<recipes.length;i++){var image=void 0;for(var j=0;j<foodTex.length;j++){if(foodTex[j].index===recipes[i].type){image=foodTex[j].image;}}batch.setColor(1,1,1,1);image.draw(batch,recipePositionInfos[i].x,recipePositionInfos[i].y,FOOD_WIDTH,FOOD_HEIGHT);}for(var _i=0;_i<4;_i++){batch.setColor(0,0,0,1);TEXT_LIST[_i].draw(batch,\"/ \".concat(recipes[_i].amount),recipePositionInfos[_i].x*0.97+FOOD_WIDTH/2+width*0.005,height*0.06,width/20);TEXT_COUNTER.draw(batch,\"\".concat(recipes[_i].counter),recipePositionInfos[_i].x*0.98+FOOD_WIDTH/2+width*0.0003-width*0.01,height*0.06,width/20);batch.setColor(1,1,1,1);}batch.end();}};};export default createRecipeRenderSystem;","map":{"version":3,"sources":["E:/fcatcher-client/src/components/game/systems/RecipeRenderSystem.js"],"names":["AlignMode","TextType","createRecipeRenderSystem","FOOD_WIDTH","FOOD_HEIGHT","recipePositionInfos","TEXT_AMOUNT1","TEXT_AMOUNT2","TEXT_AMOUNT3","TEXT_AMOUNT4","TEXT_COUNTER","TEXT_LIST","numberFont","init","foodTex","width","height","font","tmpFood","tex","index","image","RECIPE_MARGIN","i","push","x","y","setNewText","setAlignMode","right","setType","dynamic","update","delta","recipes","whiteSmokeList","smokeAnimation","stateTime","genderNewRecipeAmount","batch","camera","left","setProjection","combined","begin","length","j","type","setColor","draw","amount","counter","end"],"mappings":"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","sourcesContent":["import { AlignMode, TextType } from \"../utils/loadFontFile\";\r\n\r\nconst createRecipeRenderSystem = () => {\r\n  let FOOD_WIDTH, FOOD_HEIGHT;\r\n  let recipePositionInfos = [];\r\n  let TEXT_AMOUNT1, TEXT_AMOUNT2, TEXT_AMOUNT3, TEXT_AMOUNT4;\r\n  let TEXT_COUNTER, TEXT_LIST;\r\n  let numberFont;\r\n  return {\r\n    init({ foodTex }, { width, height, font }) {\r\n      let tmpFood;\r\n      for (let tex of foodTex) {\r\n        if (tex.index === 0) {\r\n          tmpFood = tex.image;\r\n          break;\r\n        }\r\n      }\r\n      FOOD_WIDTH = width / 7;\r\n      FOOD_HEIGHT = (FOOD_WIDTH * tmpFood.height) / tmpFood.width;\r\n\r\n      const RECIPE_MARGIN = width / 75;\r\n      for (let i = 0; i < 4; i++) {\r\n        recipePositionInfos.push({\r\n          x: width / 3.06 + i * (FOOD_WIDTH + RECIPE_MARGIN),\r\n          y: height * 0.028,\r\n        });\r\n      }\r\n\r\n      numberFont = font.numberFont;\r\n      TEXT_COUNTER = numberFont.setNewText(width);\r\n      TEXT_COUNTER.setAlignMode(AlignMode.right);\r\n      TEXT_COUNTER.setType(TextType.dynamic);\r\n    },\r\n\r\n    update(\r\n      delta,\r\n      {\r\n        recipes,\r\n        foodTex,\r\n        whiteSmokeList,\r\n        smokeAnimation,\r\n        stateTime,\r\n        genderNewRecipeAmount,\r\n      },\r\n      { batch, camera, width, height, font }\r\n    ) {\r\n      if (genderNewRecipeAmount) {\r\n        genderNewRecipeAmount = false;\r\n        TEXT_AMOUNT1 = numberFont.setNewText(width);\r\n        TEXT_AMOUNT1.setAlignMode(AlignMode.left);\r\n        TEXT_AMOUNT2 = numberFont.setNewText(width);\r\n        TEXT_AMOUNT2.setAlignMode(AlignMode.left);\r\n        TEXT_AMOUNT3 = numberFont.setNewText(width);\r\n        TEXT_AMOUNT3.setAlignMode(AlignMode.left);\r\n        TEXT_AMOUNT4 = numberFont.setNewText(width);\r\n        TEXT_AMOUNT4.setAlignMode(AlignMode.left);\r\n        TEXT_LIST = [TEXT_AMOUNT1, TEXT_AMOUNT2, TEXT_AMOUNT3, TEXT_AMOUNT4];\r\n      }\r\n\r\n      batch.setProjection(camera.combined);\r\n      batch.begin();\r\n      for (let i = 0; i < recipes.length; i++) {\r\n        let image;\r\n        for (let j = 0; j < foodTex.length; j++) {\r\n          if (foodTex[j].index === recipes[i].type) {\r\n            image = foodTex[j].image;\r\n          }\r\n        }\r\n        batch.setColor(1, 1, 1, 1);\r\n        image.draw(\r\n          batch,\r\n          recipePositionInfos[i].x,\r\n          recipePositionInfos[i].y,\r\n          FOOD_WIDTH,\r\n          FOOD_HEIGHT\r\n        );\r\n      }\r\n      for (let i = 0; i < 4; i++) {\r\n        batch.setColor(0, 0, 0, 1);\r\n        TEXT_LIST[i].draw(\r\n          batch,\r\n          `/ ${recipes[i].amount}`,\r\n          recipePositionInfos[i].x * 0.97 + FOOD_WIDTH / 2 + width * 0.005,\r\n          height * 0.06,\r\n          width / 20\r\n        );\r\n        TEXT_COUNTER.draw(\r\n          batch,\r\n          `${recipes[i].counter}`,\r\n          recipePositionInfos[i].x * 0.98 +\r\n            FOOD_WIDTH / 2 +\r\n            width * 0.0003 -\r\n            width * 0.01,\r\n          height * 0.06,\r\n          width / 20\r\n        );\r\n        batch.setColor(1, 1, 1, 1);\r\n      }\r\n      batch.end();\r\n    },\r\n  };\r\n};\r\n\r\nexport default createRecipeRenderSystem;\r\n"]},"metadata":{},"sourceType":"module"}