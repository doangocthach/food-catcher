{"ast":null,"code":"import createOrthoCamera from './orthoCamera';\nimport resizeCanvas from './resizeCanvas';\nconst defaultOptions = {\n  autoUpdate: true,\n  pixelRatio: undefined\n};\nexport default ((canvas, width, height, options) => {\n  options = { ...defaultOptions,\n    ...options\n  };\n  const gl = canvas.getContext('webgl');\n  let {\n    autoUpdate,\n    pixelRatio\n  } = options;\n  pixelRatio = pixelRatio || window.devicePixelRatio || 1;\n  const viewportInfo = {\n    pixelRatio,\n    x: 0,\n    y: 0,\n    width,\n    height\n  };\n  let resizeHandler;\n  const [vWidth, vHeight] = resizeCanvas(canvas, pixelRatio);\n  const camera = createOrthoCamera(width, height, vWidth, vHeight);\n\n  if (autoUpdate) {\n    resizeHandler = e => {\n      viewportObject.update();\n    };\n\n    window.addEventListener('resize', resizeHandler);\n  }\n\n  const viewportObject = {\n    getViewportInfo() {\n      return viewportInfo;\n    },\n\n    getCamera() {\n      return camera;\n    },\n\n    getContext() {\n      return gl;\n    },\n\n    update() {\n      let [vWidth, vHeight] = resizeCanvas(canvas, pixelRatio);\n      const ratio = width / height;\n      const vRatio = vWidth / vHeight;\n      let displayWidth, displayHeight;\n\n      if (ratio < vRatio) {\n        displayHeight = vHeight;\n        displayWidth = vHeight * ratio;\n      } else {\n        displayWidth = vWidth;\n        displayHeight = vWidth / ratio;\n      }\n\n      const displayX = (vWidth - displayWidth) / 2;\n      const displayY = (vHeight - displayHeight) / 2;\n      viewportInfo.x = displayX;\n      viewportInfo.y = displayY;\n      viewportInfo.width = displayWidth;\n      viewportInfo.height = displayHeight;\n      gl.viewport(displayX, displayY, displayWidth, displayHeight);\n      camera.resize(width, height, displayWidth, displayHeight);\n    },\n\n    cleanUp() {\n      if (resizeHandler) {\n        window.removeEventListener('resize', resizeHandler);\n      }\n    }\n\n  };\n  autoUpdate && viewportObject.update();\n  return viewportObject;\n});","map":{"version":3,"sources":["E:/fcatcher-client/node_modules/gdxjs/lib/createViewport.js"],"names":["createOrthoCamera","resizeCanvas","defaultOptions","autoUpdate","pixelRatio","undefined","canvas","width","height","options","gl","getContext","window","devicePixelRatio","viewportInfo","x","y","resizeHandler","vWidth","vHeight","camera","e","viewportObject","update","addEventListener","getViewportInfo","getCamera","ratio","vRatio","displayWidth","displayHeight","displayX","displayY","viewport","resize","cleanUp","removeEventListener"],"mappings":"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","sourcesContent":["import createOrthoCamera from './orthoCamera';\nimport resizeCanvas from './resizeCanvas';\nconst defaultOptions = {\n  autoUpdate: true,\n  pixelRatio: undefined\n};\nexport default ((canvas, width, height, options) => {\n  options = { ...defaultOptions,\n    ...options\n  };\n  const gl = canvas.getContext('webgl');\n  let {\n    autoUpdate,\n    pixelRatio\n  } = options;\n  pixelRatio = pixelRatio || window.devicePixelRatio || 1;\n  const viewportInfo = {\n    pixelRatio,\n    x: 0,\n    y: 0,\n    width,\n    height\n  };\n  let resizeHandler;\n  const [vWidth, vHeight] = resizeCanvas(canvas, pixelRatio);\n  const camera = createOrthoCamera(width, height, vWidth, vHeight);\n\n  if (autoUpdate) {\n    resizeHandler = e => {\n      viewportObject.update();\n    };\n\n    window.addEventListener('resize', resizeHandler);\n  }\n\n  const viewportObject = {\n    getViewportInfo() {\n      return viewportInfo;\n    },\n\n    getCamera() {\n      return camera;\n    },\n\n    getContext() {\n      return gl;\n    },\n\n    update() {\n      let [vWidth, vHeight] = resizeCanvas(canvas, pixelRatio);\n      const ratio = width / height;\n      const vRatio = vWidth / vHeight;\n      let displayWidth, displayHeight;\n\n      if (ratio < vRatio) {\n        displayHeight = vHeight;\n        displayWidth = vHeight * ratio;\n      } else {\n        displayWidth = vWidth;\n        displayHeight = vWidth / ratio;\n      }\n\n      const displayX = (vWidth - displayWidth) / 2;\n      const displayY = (vHeight - displayHeight) / 2;\n      viewportInfo.x = displayX;\n      viewportInfo.y = displayY;\n      viewportInfo.width = displayWidth;\n      viewportInfo.height = displayHeight;\n      gl.viewport(displayX, displayY, displayWidth, displayHeight);\n      camera.resize(width, height, displayWidth, displayHeight);\n    },\n\n    cleanUp() {\n      if (resizeHandler) {\n        window.removeEventListener('resize', resizeHandler);\n      }\n    }\n\n  };\n  autoUpdate && viewportObject.update();\n  return viewportObject;\n});"]},"metadata":{},"sourceType":"module"}